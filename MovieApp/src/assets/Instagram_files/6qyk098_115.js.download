;/*FB_PKG_DELIM*/

__d("CometDeferredPopoverTrigger.react",["BasePopoverTrigger.react","CometPopoverLoadingState.react","deferredLoadComponent","react","tracePolicyFromResource","useCometPopoverInteractionTracing"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.doNotCloseOnOutsideClick,d=a.fallback,e=a.popoverProps,f=a.popoverResource,g=a.preloadTrigger,h=a.tracePolicy;a=babelHelpers.objectWithoutPropertiesLoose(a,["doNotCloseOnOutsideClick","fallback","popoverProps","popoverResource","preloadTrigger","tracePolicy"]);var j=c("deferredLoadComponent")(f);h=c("useCometPopoverInteractionTracing")((h=h)!=null?h:c("tracePolicyFromResource")("comet.popover",f),"deferred",g);return i.jsx(c("BasePopoverTrigger.react"),babelHelpers["extends"]({doNotCloseOnOutsideClick:b,fallback:(b=d)!=null?b:i.jsx(c("CometPopoverLoadingState.react"),{withArrow:!0}),interactionTracker:h,popover:j,popoverPreloadResource:f,popoverProps:babelHelpers["extends"]({},e,{loadImmediately:!0}),preloadTrigger:g},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDSMoreHorizontalOutlineIcon",["IGDSMoreHorizontalPanoOutlineIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("IGDSMoreHorizontalPanoOutlineIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("IGDMessageMoreMenuButton.react",["fbt","CometDeferredPopoverTrigger.react","IGDMessageButton.react","IGDSMoreHorizontalOutlineIcon","IGDThreadListNewMessageLoggingDataContext","LSMessagingThreadTypeUtil","MessengerWebUXLogger","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("requireDeferred")("IGDMessageMoreMenuPopover.react").__setRef("IGDMessageMoreMenuButton.react");function a(a){var b=a.isCopyable,e=a.isForwardable,f=a.isMessageRequest,g=a.isReportable,i=a.isUnsendable,l=a.message,m=a.outgoing,n=a.setMoreMenuOpen,o=a.setReportDialogOpen,p=a.setUnsendDialogOpen,q=a.shouldRenderReply;a=a.thread;var r=h._("__JHASH__nNxAei6AI9v__JHASH__"),s=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger(),t=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceId(),u=function(a){s==null?void 0:s({eventName:"open_message_options",flowInstanceId:t.current}),a()};return j.jsx(c("CometDeferredPopoverTrigger.react"),{align:m?"end":"start",onVisibilityChange:n,popoverProps:{isCopyable:b,isForwardable:e,isGroup:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),isMessageRequest:f,isReportable:g,isSecure:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),isUnsendable:i,message:l,setReportDialogOpen:o,setUnsendDialogOpen:p,shouldRenderReply:q,thread:a},popoverResource:k,popoverType:"menu",position:"above",children:function(a,b){return j.jsx(c("IGDMessageButton.react"),{innerRef:a,label:r,onClick:function(){return u(b)},children:j.jsx(c("IGDSMoreHorizontalOutlineIcon"),{alt:r,color:"ig-primary-text","data-testid":void 0,size:16})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?"":b[0].join("")}).filter(function(a){return a!==""})}a={useSelectedReaction:function(a){var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("reactions")).getKeyRange(a.threadKey,a.messageId,e)},[e,b,a.messageId,a.threadKey],f.id+":34");if(g!=null)return g.reaction},useSelectedReactionsV2:function(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("reactions_v2")).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor&&(h||(h=d("I64"))).gt(a.count,(h||(h=d("I64"))).zero)}).map(function(a){a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.table("reaction_v2_types")).getKeyRange(a.reactionFbid),f.id+":59");return[a==null?void 0:a.reactionLiteral,a==null?void 0:a.reactionLiteralVariant16].filter(Boolean)})},[b,a.threadKey,a.messageId],f.id+":50").flat();e=j(e);return e},useSelectedReactionV2:function(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("reactions_v2")).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor})},[b,a.messageId,a.threadKey],f.id+":78");return d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.table("reaction_v2_types")).getKeyRange(e.reactionFbid).map(function(a){return a.reactionLiteral}):d("ReQL").empty()},[b,e],f.id+":86")}};g.MWV2MessageReactionHooks=a}),98);
__d("IGDMessageReactionButton.react",["fbt","EmojiFormat.bs","IGDMessageButton.react","IGDSFace2OutlineIcon","IGDSLazyPopoverTrigger.react","IGDThreadListNewMessageLoggingDataContext","MAWPSendOrRemoveReaction.react","MWV2MessageReactionHooks","MessengerWebUXLogger","UnicodeUtils","emptyFunction","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useCallback,m=c("requireDeferred")("IGDComposerEmojiPicker.react").__setRef("IGDMessageReactionButton.react");function a(a){var b=a.isSecure,e=a.message,f=a.outgoing,g=a.setReactionsMenuOpen,i=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReaction(e),n=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(e,b,"reaction_tray");a=l(function(a){var b=d("EmojiFormat.bs").codeArrayToUnicode(a);if(i!=null){var c=(j||(j=d("UnicodeUtils"))).getCodePoints(i);b===i&&(b=void 0);c[0]===10084&&a[0]===10084&&(b=void 0)}n(e.messageId,b,"reaction")},[e.messageId,i,n]);b=f?"end":"start";f=c("emptyFunction");f={closeAfterSelect:!0,onClose:f,onSelect:a,showPopoverArrow:!1};var o=h._("__JHASH__BdkUyl8gsw5__JHASH__"),p=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger(),q=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceId(),r=function(a){p==null?void 0:p({eventName:"reaction_open_emoji_picker",extraData:{message_id:e.messageId},flowInstanceId:q.current}),a()};return k.jsx(c("IGDSLazyPopoverTrigger.react"),{align:b,onVisibilityChange:function(a){return g(function(){return a})},popoverProps:f,popoverResource:m,popoverType:"dialog",position:"above",children:function(a,b){return k.jsx(c("IGDMessageButton.react"),{innerRef:a,label:o,onClick:function(){return r(b)},children:k.jsx(c("IGDSFace2OutlineIcon"),{alt:o,color:"ig-primary-text","data-testid":void 0,size:16})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDSReplyOutlineIcon",["IGDSReplyPanoOutlineIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("IGDSReplyPanoOutlineIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("IGDMessageReplyButton.react",["IGDMessageButton.react","IGDSReplyOutlineIcon","react","useIGDMessageReply.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={button:{opacity:"x15vok9n",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0}};function a(a){var b=a.message,d=a.onClose;a=a.thread;b=c("useIGDMessageReply.react")(b,a,d);a=b[0];d=b[1];return i.jsx(c("IGDMessageButton.react"),{label:d,onClick:a,xstyle:j.button,children:i.jsx(c("IGDSReplyOutlineIcon"),{alt:d,color:"ig-primary-text","data-testid":void 0,size:16})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWPThreadCapabilitiesContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),e=b.canUnsendMessage;b=b.isPaused;a=a.cannotUnsendReason!=null?(h||(h=d("I64"))).equal(a.cannotUnsendReason,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0;return e&&a&&!b}g["default"]=a}),98);
__d("IGDMessageRowActions.react",["I64","IGDMessageMoreMenuButton.react","IGDMessageReactionButton.react","IGDMessageReplyButton.react","LSBitFlag","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","MWPActor.react","MWPBaseMessageListRowActions.react","MWPMessageHasAttachment","MessagingAttachmentType","ReQL","ReQLSuspense","qex","react","useIsGenAiFeedbackEnabled","useIsReadOnlyFeatureLimited","useIsThreadBlocked","useMWPCanRemoveMessageGlobally","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useState,n=[(k||(k=d("LSIntEnum"))).ofNumber(1),k.ofNumber(16384),k.ofNumber(2),k.ofNumber(4)],o=function(){return c("qex")._("121")===!0};function p(a){var b=a.message,e=a.outgoing,g=a.setMoreMenuOpen,i=a.setReactionsMenuOpen,m=a.setReportDialogOpen;a=a.setUnsendDialogOpen;var p=(h||(h=c("useReStore")))(),q=d("MWPActor.react").useActor(),r=c("useIsThreadBlocked")(),s=c("useIsReadOnlyFeatureLimited")(),t=d("MWLSThread").useThreadExn(b.threadKey),u=t.threadKey,v=t.threadType,w=b.displayedContentTypes,x=b.messageId,y=b.senderId,z=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(p.table("contacts")).getKeyRange(y)},[p,y],f.id+":78"),A=c("MWPMessageHasAttachment")(b),B=d("ReQLSuspense").useFirst(function(){return A?d("ReQL").fromTableAscending(p.table("attachments")).getKeyRange(u,x):d("ReQL").empty()},[p,u,x,A],f.id+":85");q=(j||(j=d("I64"))).equal(y,q);var C=d("LSMessagingThreadTypeUtil").isSecure(v),D=!q&&d("LSMessagingThreadTypeUtil").isOneToOne(v)&&z!=null?!(j||(j=d("I64"))).equal(z.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)):!1,E=z!=null&&d("LSContactBitOffset").has(66,z);z=z!=null&&d("LSContactBitOffset").has(18,z);var F=d("LSMessagingThreadTypeUtil").isIGDMessageRequest(t);z=z&&!q&&n.findIndex(function(a){return(j||(j=d("I64"))).equal(w,a)})!==-1;var G=j.equal(w,d("LSBitFlag").empty);q=c("useMWPCanRemoveMessageGlobally")(b)&&q;B=B!=null&&(j||(j=d("I64"))).equal(B.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?B.isSharable:!0;var H=b.replySourceTypeV2!=null&&(k||(k=d("LSIntEnum"))).toNumber(b.replySourceTypeV2)===c("LSMessageReplySourceTypeV2").FORWARD,I=(j||(j=d("I64"))).equal(w,(k||(k=d("LSIntEnum"))).ofNumber(1))||(j||(j=d("I64"))).equal(w,(k||(k=d("LSIntEnum"))).ofNumber(1033));I=I||H&&!!b.text;H=!r&&!E&&!F&&!s&&!b.isUnsent&&!G&&(d("LSMessagingThreadTypeUtil").isSecure(v)?o():!0)&&d("LSThreadBitOffset").has(103,t)&&B&&!D&&!(j||(j=d("I64"))).equal(b.displayedContentTypes,(k||(k=d("LSIntEnum"))).ofNumber(256));v=!r&&!E&&!F&&!s&&d("LSThreadBitOffset").has(42,t)&&!b.isUnsent&&!G;B=d("LSThreadBitOffset").has(18,t);D=d("LSThreadBitOffset").has(139,t);var J=d("LSThreadBitOffset").has(169,t);r=!r&&!E&&!F&&!s&&!b.isUnsent&&!G&&(D?J:B);E=!G&&(H||q||I||z);s=r?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageReactionButton.react"),{isSecure:C,message:b,outgoing:e,setReactionsMenuOpen:i})}):null;D=c("useIsGenAiFeedbackEnabled")(b.botResponseId);J=D||!v?null:l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageReplyButton.react"),{message:b,thread:t})});B=E?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageMoreMenuButton.react"),{isCopyable:I,isForwardable:H,isMessageRequest:F,isReportable:z,isUnsendable:q,message:b,outgoing:e,setMoreMenuOpen:g,setReportDialogOpen:m,setUnsendDialogOpen:a,shouldRenderReply:D,thread:t})}):null;return l.jsxs(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsList,{outgoing:e,children:[s,J,B]})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.ariaHidden;b=b===void 0?!1:b;var c=a.focused,e=a.hasReactions,f=a.hovered,g=a.message,h=a.outgoing,i=a.setReportDialogOpen;a=a.setUnsendDialogOpen;var j=m(!1),k=j[0];j=j[1];var n=m(!1),o=n[0];n=n[1];f=f||c||o||k;return l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsContainer,{ariaHidden:b,hasReactions:e,outgoing:h,children:f?l.jsx(p,{message:g,outgoing:h,setMoreMenuOpen:j,setReactionsMenuOpen:n,setReportDialogOpen:i,setUnsendDialogOpen:a}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);